<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Text Search</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, 
                #0a0a0f 0%, 
                #1a1a2e 30%, 
                #16213e 70%, 
                #0f3460 100%);
            min-height: 100vh;
            color: #f0f0f0;
            position: relative;
            overflow-x: hidden;
        }

        /* –ú–æ–¥–µ—Ä–Ω —á–∞—Å—Ç–∏—Ü—ã */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, 
                rgba(138, 138, 255, 0.4) 0%,
                rgba(138, 138, 255, 0) 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        /* –ù–µ–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .neon-glow {
            box-shadow: 0 0 15px rgba(138, 138, 255, 0.5),
                        0 0 30px rgba(138, 138, 255, 0.2);
        }

        /* –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –º–µ–Ω—é */
        .global-nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(15, 15, 25, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(138, 138, 255, 0.2);
            z-index: 1000;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-stats {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .stat-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 16px;
            background: rgba(138, 138, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(138, 138, 255, 0.3);
        }

        .stat-label {
            font-size: 0.8rem;
            color: #a3a3ff;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
        }

        .top-searches {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-tag {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(138, 138, 255, 0.3);
            border-radius: 8px;
            color: #a3a3ff;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-tag:hover {
            background: rgba(138, 138, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 20px 50px;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            grid-column: 1;
        }

        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            grid-column: 2;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transition: 0.5s;
        }

        .glass-card:hover::before {
            left: 100%;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            border-color: rgba(138, 138, 255, 0.5);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4),
                        0 0 100px rgba(138, 138, 255, 0.1);
        }

        /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            border-radius: 2px;
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ */
        .file-drop-area {
            border: 2px dashed rgba(138, 138, 255, 0.5);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .file-drop-area:hover {
            border-color: #8a8aff;
            background: rgba(138, 138, 255, 0.05);
        }

        .file-drop-area.dragover {
            border-color: #8a8aff;
            background: rgba(138, 138, 255, 0.1);
            transform: scale(1.02);
        }

        .file-info {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #8a8aff;
        }

        /* –ü–æ–∏—Å–∫ */
        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .search-input {
            flex: 1;
            padding: 18px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(138, 138, 255, 0.3);
            border-radius: 15px;
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #8a8aff;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 30px rgba(138, 138, 255, 0.3);
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 18px 30px;
            border-radius: 15px;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(138, 138, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .results-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .results-container::-webkit-scrollbar {
            width: 8px;
        }

        .results-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .results-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            border-radius: 4px;
        }

        /* –≠–ª–µ–º–µ–Ω—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ */
        .result-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .result-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, #8a8aff, #6464ff);
            border-radius: 4px 0 0 4px;
        }

        .result-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
            border-color: rgba(138, 138, 255, 0.3);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .line-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .line-badge {
            background: linear-gradient(135deg, #8a8aff 0%, #6464ff 100%);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .position-info {
            color: #a3a3ff;
            font-size: 0.9rem;
        }

        .result-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .action-btn.copy:hover {
            background: rgba(138, 138, 255, 0.3);
        }

        .action-btn.export:hover {
            background: rgba(100, 255, 100, 0.2);
        }

        .line-content {
            color: #ffffff;
            font-size: 1.1rem;
            line-height: 1.6;
            margin-top: 15px;
            font-family: 'Monaco', 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .highlight {
            background: linear-gradient(135deg, 
                rgba(255, 255, 180, 0.3) 0%, 
                rgba(255, 255, 150, 0.2) 100%);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #ffffa0;
            position: relative;
            animation: highlightPulse 2s infinite;
        }

        @keyframes highlightPulse {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(255, 255, 180, 0.5);
            }
            50% { 
                box-shadow: 0 0 20px rgba(255, 255, 180, 0.8);
            }
        }

        /* –°–∞–π–¥–±–∞—Ä - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-3px);
            border-color: rgba(138, 138, 255, 0.3);
        }

        .stat-card h4 {
            font-size: 0.9rem;
            color: #a3a3ff;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
        }

        /* –¢–æ–ø –∑–∞–ø—Ä–æ—Å–æ–≤ */
        .top-queries {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .query-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .query-item:hover {
            background: rgba(138, 138, 255, 0.1);
            transform: translateX(5px);
        }

        .query-text {
            font-weight: 500;
            color: #ffffff;
            max-width: 70%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .query-count {
            background: rgba(138, 138, 255, 0.2);
            color: #8a8aff;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 12px;
            background: rgba(30, 30, 46, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(138, 138, 255, 0.3);
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .message.show {
            transform: translateX(0);
        }

        .message.success {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .message.error {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 992px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                grid-column: 1;
            }
            
            .global-nav {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
            
            .nav-stats {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .top-searches {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .result-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .result-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- –ß–∞—Å—Ç–∏—Ü—ã -->
    <div class="particles" id="particles"></div>
    
    <!-- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –º–µ–Ω—é -->
    <nav class="global-nav">
        <div class="nav-brand">
            <span>üîç</span>
            <span>Modern Text Search</span>
        </div>
        
        <div class="nav-stats">
            <div class="stat-badge">
                <span class="stat-label">–§–∞–π–ª</span>
                <span class="stat-value" id="globalFileName">‚Äî</span>
            </div>
            <div class="stat-badge">
                <span class="stat-label">–°—Ç—Ä–æ–∫</span>
                <span class="stat-value" id="globalLineCount">0</span>
            </div>
            <div class="stat-badge">
                <span class="stat-label">–ù–∞–π–¥–µ–Ω–æ</span>
                <span class="stat-value" id="globalFoundCount">0</span>
            </div>
            
            <div class="top-searches">
                <span style="color: #a3a3ff; margin-right: 10px;">–¢–æ–ø:</span>
                <div id="topSearches"></div>
            </div>
        </div>
    </nav>

    <div class="container">
        <main class="main-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="header">
                <h1>üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É</h1>
                <p style="color: #a3a3ff; max-width: 600px; margin: 0 auto;">
                    –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∏ –Ω–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–µ —Å–ª–æ–≤–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
                </p>
            </div>

            <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
            <div class="glass-card">
                <h3 class="section-title">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª</h3>
                <div class="file-drop-area" id="fileDropArea">
                    <div style="font-size: 4rem; margin-bottom: 20px; color: #8a8aff;">üìÑ</div>
                    <p style="font-size: 1.2rem; margin-bottom: 10px; color: #ffffff;">
                        –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ .txt —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞
                    </p>
                    <p style="color: #a3a3ff; font-size: 0.9rem;">
                        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (.txt)
                    </p>
                    <input type="file" id="fileInput" accept=".txt" style="display: none;">
                </div>
                <div id="fileInfo" class="file-info"></div>
            </div>

            <!-- –ü–æ–∏—Å–∫ -->
            <div class="glass-card">
                <h3 class="section-title">üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É</h3>
                
                <div class="search-box">
                    <input type="text" 
                           id="searchInput" 
                           class="search-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑—É –¥–ª—è –ø–æ–∏—Å–∫–∞..."
                           disabled>
                    <button id="searchBtn" class="btn btn-primary" disabled>
                        <span>–ü–æ–∏—Å–∫</span>
                        <span>üîç</span>
                    </button>
                </div>

                <div class="btn-group">
                    <button id="copyAllBtn" class="btn btn-secondary" disabled>
                        <span>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ</span>
                    </button>
                    <button id="exportBtn" class="btn btn-secondary" disabled>
                        <span>üì§ –≠–∫—Å–ø–æ—Ä—Ç</span>
                    </button>
                    <button id="clearBtn" class="btn btn-secondary">
                        <span>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</span>
                    </button>
                </div>

                <div class="results-header">
                    <h3 class="section-title" style="margin: 0;">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                    <div style="color: #a3a3ff; font-weight: 600;">
                        –ù–∞–π–¥–µ–Ω–æ: <span id="resultsCount">0</span> —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
                    </div>
                </div>

                <div id="resultsContainer" class="results-container">
                    <div class="no-results" style="text-align: center; padding: 60px 20px; color: #a3a3ff;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üîç</div>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">
                            –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø–æ–∏—Å–∫
                        </p>
                        <p style="opacity: 0.7;">
                            –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <!-- –°–∞–π–¥–±–∞—Ä -->
        <aside class="sidebar">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="glass-card">
                <h3 class="section-title">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞</h4>
                        <div class="value" id="statFileSize">‚Äî</div>
                    </div>
                    <div class="stat-card">
                        <h4>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫</h4>
                        <div class="value" id="statTotalLines">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>–í—Å–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤</h4>
                        <div class="value" id="statChars">0</div>
                    </div>
                    <div class="stat-card">
                        <h4>–ü–æ–∏—Å–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</h4>
                        <div class="value" id="statSearches">0</div>
                    </div>
                </div>
            </div>

            <!-- –¢–æ–ø –∑–∞–ø—Ä–æ—Å–æ–≤ -->
            <div class="glass-card">
                <h3 class="section-title">üî• –¢–æ–ø –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
                <div id="topQueries" class="top-queries">
                    <div class="no-queries" style="text-align: center; padding: 30px 20px; color: #a3a3ff;">
                        <p>–ó–∞–ø—Ä–æ—Å—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</p>
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç -->
            <div class="glass-card">
                <h3 class="section-title">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div style="display: grid; gap: 10px;">
                    <button id="quickCopyBtn" class="btn btn-secondary" disabled>
                        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å –Ω–æ–º–µ—Ä–∞–º–∏
                    </button>
                    <button id="quickExportBtn" class="btn btn-secondary" disabled>
                        üì§ –≠–∫—Å–ø–æ—Ä—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö
                    </button>
                    <button id="findSimilarBtn" class="btn btn-secondary" disabled>
                        üîÑ –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div id="message" class="message"></div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let fileContent = '';
        let searchResults = [];
        let fileName = '';
        let fileSize = 0;
        let searchHistory = new Map();
        let totalSearches = 0;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const elements = {
            fileInput: document.getElementById('fileInput'),
            fileDropArea: document.getElementById('fileDropArea'),
            searchInput: document.getElementById('searchInput'),
            searchBtn: document.getElementById('searchBtn'),
            clearBtn: document.getElementById('clearBtn'),
            copyAllBtn: document.getElementById('copyAllBtn'),
            exportBtn: document.getElementById('exportBtn'),
            resultsContainer: document.getElementById('resultsContainer'),
            fileInfo: document.getElementById('fileInfo'),
            resultsCount: document.getElementById('resultsCount'),
            topQueries: document.getElementById('topQueries'),
            topSearches: document.getElementById('topSearches'),
            message: document.getElementById('message'),
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            globalFileName: document.getElementById('globalFileName'),
            globalLineCount: document.getElementById('globalLineCount'),
            globalFoundCount: document.getElementById('globalFoundCount'),
            statFileSize: document.getElementById('statFileSize'),
            statTotalLines: document.getElementById('statTotalLines'),
            statChars: document.getElementById('statChars'),
            statSearches: document.getElementById('statSearches'),
            
            // –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏
            quickCopyBtn: document.getElementById('quickCopyBtn'),
            quickExportBtn: document.getElementById('quickExportBtn'),
            findSimilarBtn: document.getElementById('findSimilarBtn')
        };

        // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 100 + 50;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.opacity = Math.random() * 0.1 + 0.05;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
                particle.style.animation = `
                    particleFloat ${Math.random() * 30 + 20}s linear infinite
                `;
                
                container.appendChild(particle);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª—å –∞–Ω–∏–º–∞—Ü–∏–∏
            const style = document.createElement('style');
            style.textContent = `
                @keyframes particleFloat {
                    0%, 100% { 
                        transform: translate(0, 0) scale(1);
                    }
                    25% { 
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px) scale(1.2);
                    }
                    50% { 
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px) scale(1);
                    }
                    75% { 
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px) scale(0.8);
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text, type = 'info') {
            const message = elements.message;
            message.textContent = text;
            message.className = `message ${type} show`;
            
            setTimeout(() => {
                message.classList.remove('show');
            }, 3000);
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
        function formatBytes(bytes) {
            if (bytes === 0) return '0 –ë';
            const k = 1024;
            const sizes = ['–ë', '–ö–ë', '–ú–ë', '–ì–ë'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const lines = fileContent ? fileContent.split('\n').length : 0;
            const chars = fileContent ? fileContent.length : 0;
            
            elements.globalFileName.textContent = fileName || '‚Äî';
            elements.globalLineCount.textContent = lines;
            elements.globalFoundCount.textContent = searchResults.length;
            
            elements.statFileSize.textContent = fileSize ? formatBytes(fileSize) : '‚Äî';
            elements.statTotalLines.textContent = lines;
            elements.statChars.textContent = chars.toLocaleString();
            elements.statSearches.textContent = totalSearches;
            
            elements.resultsCount.textContent = searchResults.length;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ø –∑–∞–ø—Ä–æ—Å–æ–≤
        function updateTopQueries() {
            const sortedQueries = Array.from(searchHistory.entries())
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedQueries.length === 0) {
                elements.topQueries.innerHTML = `
                    <div class="no-queries" style="text-align: center; padding: 30px 20px; color: #a3a3ff;">
                        <p>–ó–∞–ø—Ä–æ—Å—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</p>
                    </div>
                `;
                elements.topSearches.innerHTML = '<span style="color: #a3a3ff;">–ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤</span>';
                return;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å
            elements.topQueries.innerHTML = '';
            sortedQueries.forEach(([query, count]) => {
                const queryElement = document.createElement('div');
                queryElement.className = 'query-item';
                queryElement.innerHTML = `
                    <span class="query-text" title="${query}">${query}</span>
                    <span class="query-count">${count}</span>
                `;
                queryElement.addEventListener('click', () => {
                    elements.searchInput.value = query;
                    performSearch();
                });
                elements.topQueries.appendChild(queryElement);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –º–µ–Ω—é
            elements.topSearches.innerHTML = '';
            sortedQueries.slice(0, 3).forEach(([query]) => {
                const tag = document.createElement('span');
                tag.className = 'search-tag';
                tag.textContent = query;
                tag.title = `–ù–∞–π—Ç–∏: ${query}`;
                tag.addEventListener('click', () => {
                    elements.searchInput.value = query;
                    performSearch();
                });
                elements.topSearches.appendChild(tag);
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
        function handleFileUpload(file) {
            if (!file.name.toLowerCase().endsWith('.txt')) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .txt', 'error');
                return;
            }

            fileName = file.name;
            fileSize = file.size;

            const reader = new FileReader();
            
            reader.onload = function(e) {
                fileContent = e.target.result;
                
                // –í–∫–ª—é—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                elements.searchInput.disabled = false;
                elements.searchBtn.disabled = false;
                elements.copyAllBtn.disabled = false;
                elements.exportBtn.disabled = false;
                elements.quickCopyBtn.disabled = false;
                elements.quickExportBtn.disabled = false;
                elements.findSimilarBtn.disabled = false;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
                const lines = fileContent.split('\n').length;
                elements.fileInfo.innerHTML = `
                    <strong>${fileName}</strong>
                    <div style="margin-top: 8px; font-size: 0.9rem;">
                        <span>üìè ${formatBytes(fileSize)}</span> ‚Ä¢
                        <span>üìä ${lines} —Å—Ç—Ä–æ–∫</span> ‚Ä¢
                        <span>üî§ ${fileContent.length.toLocaleString()} —Å–∏–º–≤–æ–ª–æ–≤</span>
                    </div>
                `;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                updateStats();
                
                showMessage(`–§–∞–π–ª "${fileName}" —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!`, 'success');
            };
            
            reader.onerror = function() {
                showMessage('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞', 'error');
                elements.fileInfo.innerHTML = '<span style="color: #f44336;">–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞</span>';
            };
            
            reader.readAsText(file, 'UTF-8');
        }

        // –ü–æ–∏—Å–∫
        function performSearch() {
            const searchTerm = elements.searchInput.value.trim();
            
            if (!searchTerm) {
                showMessage('–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞', 'warning');
                elements.searchInput.focus();
                return;
            }
            
            if (!fileContent) {
                showMessage('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª', 'warning');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            const count = searchHistory.get(searchTerm) || 0;
            searchHistory.set(searchTerm, count + 1);
            totalSearches++;
            
            const lines = fileContent.split('\n');
            searchResults = [];
            
            // –ü–æ–∏—Å–∫ —Å —É—á–µ—Ç–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞
            lines.forEach((line, index) => {
                const lineLower = line.toLowerCase();
                const termLower = searchTerm.toLowerCase();
                
                if (lineLower.includes(termLower)) {
                    // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Ö–æ–∂–¥–µ–Ω–∏—è
                    const positions = [];
                    let pos = lineLower.indexOf(termLower);
                    while (pos !== -1) {
                        positions.push(pos);
                        pos = lineLower.indexOf(termLower, pos + 1);
                    }
                    
                    searchResults.push({
                        lineNumber: index + 1,
                        content: line,
                        searchTerm: searchTerm,
                        positions: positions
                    });
                }
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            updateStats();
            updateTopQueries();
            displayResults();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            elements.searchBtn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                elements.searchBtn.style.transform = '';
            }, 200);
            
            showMessage(`–ù–∞–π–¥–µ–Ω–æ ${searchResults.length} —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π`, 'success');
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults() {
            const container = elements.resultsContainer;
            
            if (searchResults.length === 0) {
                container.innerHTML = `
                    <div class="no-results" style="text-align: center; padding: 60px 20px; color: #a3a3ff;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üîç</div>
                        <p style="font-size: 1.2rem; margin-bottom: 10px;">
                            –ü–æ –∑–∞–ø—Ä–æ—Å—É "<span style="color: #8a8aff;">${elements.searchInput.value}</span>" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                        </p>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';
            
            searchResults.forEach(result => {
                const escapedTerm = escapeRegExp(result.searchTerm);
                const regex = new RegExp(`(${escapedTerm})`, 'gi');
                
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π
                let highlightedContent = result.content;
                result.positions.sort((a, b) => b - a).forEach(pos => {
                    const end = pos + result.searchTerm.length;
                    highlightedContent = 
                        highlightedContent.substring(0, pos) +
                        `<span class="highlight">${highlightedContent.substring(pos, end)}</span>` +
                        highlightedContent.substring(end);
                });
                
                const resultElement = document.createElement('div');
                resultElement.className = 'result-item fade-in';
                resultElement.innerHTML = `
                    <div class="result-header">
                        <div class="line-info">
                            <span class="line-badge">–°—Ç—Ä–æ–∫–∞ #${result.lineNumber}</span>
                            <span class="position-info">
                                ${result.positions.length} –≤—Ö–æ–∂–¥–µ–Ω–∏${result.positions.length === 1 ? '–µ' : '—è'}
                            </span>
                        </div>
                        <div class="result-actions">
                            <button class="action-btn copy" data-line="${result.lineNumber}" data-content="${escapeHtml(result.content)}">
                                üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                            <button class="action-btn export" data-line="${result.lineNumber}">
                                üì§ –≠–∫—Å–ø–æ—Ä—Ç
                            </button>
                        </div>
                    </div>
                    <div class="line-content">${highlightedContent}</div>
                `;
                
                container.appendChild(resultElement);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            container.querySelectorAll('.action-btn.copy').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const line = e.target.dataset.line;
                    const content = e.target.dataset.content;
                    copyToClipboard(`[–°—Ç—Ä–æ–∫–∞ ${line}] ${content}`);
                    showMessage(`–°—Ç—Ä–æ–∫–∞ ${line} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!`, 'success');
                });
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
            container.querySelectorAll('.action-btn.export').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const line = e.target.dataset.line;
                    const result = searchResults.find(r => r.lineNumber == line);
                    if (result) {
                        exportSingleResult(result);
                    }
                });
            });
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function copyAllResults() {
            if (searchResults.length === 0) {
                showMessage('–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 'warning');
                return;
            }
            
            let text = `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${elements.searchInput.value}"\n`;
            text += `–§–∞–π–ª: ${fileName}\n`;
            text += `–ù–∞–π–¥–µ–Ω–æ: ${searchResults.length} —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π\n\n`;
            
            searchResults.forEach(result => {
                text += `[–°—Ç—Ä–æ–∫–∞ ${result.lineNumber}]: ${result.content}\n`;
            });
            
            copyToClipboard(text);
            showMessage(`–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (${searchResults.length} —Å—Ç—Ä–æ–∫) —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã!`, 'success');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function exportResults() {
            if (searchResults.length === 0) {
                showMessage('–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'warning');
                return;
            }
            
            let content = `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${elements.searchInput.value}"\n`;
            content += `–§–∞–π–ª: ${fileName}\n`;
            content += `–í—Ä–µ–º—è —ç–∫—Å–ø–æ—Ä—Ç–∞: ${new Date().toLocaleString()}\n`;
            content += `–ù–∞–π–¥–µ–Ω–æ: ${searchResults.length} —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π\n\n`;
            
            searchResults.forEach(result => {
                content += `[–°—Ç—Ä–æ–∫–∞ ${result.lineNumber}]: ${result.content}\n`;
            });
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `search_results_${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMessage(`–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!`, 'success');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function exportSingleResult(result) {
            const content = `[–°—Ç—Ä–æ–∫–∞ ${result.lineNumber} –∏–∑ —Ñ–∞–π–ª–∞ "${fileName}"]\n${result.content}`;
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `line_${result.lineNumber}_${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMessage(`–°—Ç—Ä–æ–∫–∞ ${result.lineNumber} —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞!`, 'success');
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).catch(err => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏:', err);
                // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            });
        }

        // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ RegExp
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            searchResults = [];
            elements.searchInput.value = '';
            updateStats();
            
            elements.resultsContainer.innerHTML = `
                <div class="no-results" style="text-align: center; padding: 60px 20px; color: #a3a3ff;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">üîç</div>
                    <p style="font-size: 1.2rem; margin-bottom: 10px;">
                        –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø–æ–∏—Å–∫
                    </p>
                    <p style="opacity: 0.7;">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å
                    </p>
                </div>
            `;
            
            showMessage('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—â–µ–Ω—ã', 'info');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            updateStats();
            updateTopQueries();
            
            // Drag and drop
            elements.fileDropArea.addEventListener('click', () => {
                elements.fileInput.click();
            });
            
            elements.fileDropArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                elements.fileDropArea.classList.add('dragover');
            });
            
            elements.fileDropArea.addEventListener('dragleave', () => {
                elements.fileDropArea.classList.remove('dragover');
            });
            
            elements.fileDropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                elements.fileDropArea.classList.remove('dragover');
                
                const file = e.dataTransfer.files[0];
                if (file) {
                    handleFileUpload(file);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            elements.fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    handleFileUpload(file);
                }
            });
            
            elements.searchBtn.addEventListener('click', performSearch);
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
            
            elements.clearBtn.addEventListener('click', clearResults);
            elements.copyAllBtn.addEventListener('click', copyAllResults);
            elements.exportBtn.addEventListener('click', exportResults);
            
            // –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏
            elements.quickCopyBtn.addEventListener('click', copyAllResults);
            elements.quickExportBtn.addEventListener('click', exportResults);
            elements.findSimilarBtn.addEventListener('click', () => {
                if (searchResults.length > 0) {
                    const firstTerm = searchResults[0].searchTerm;
                    elements.searchInput.value = firstTerm;
                    performSearch();
                }
            });
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
            elements.searchInput.addEventListener('focus', () => {
                elements.searchInput.classList.add('neon-glow');
            });
            
            elements.searchInput.addEventListener('blur', () => {
                elements.searchInput.classList.remove('neon-glow');
            });
        });
    </script>
</body>
</html>